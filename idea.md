# Проект "Прораб-Финанс Мост"

## 1. Резюме Идеи (Executive Summary)

**Проблема:** Существует значительный разрыв между оперативными данными на стройплощадке (у прораба) и требованиями финансового/бухгалтерского учета (например, в СБИС, 1С). Прорабы фиксируют данные (материалы, работы, часы) в неудобных форматах (блокноты, фото, мессенджеры), а бухгалтерия тратит массу времени на расшифровку, перенос данных и исправление ошибок. Это ведет к задержкам в учете, искажению финансовой картины, отсутствию оперативного контроля и потенциальным кассовым разрывам. Существующие ERP-системы (Procore, CMiC) часто слишком сложны и дороги для малого/среднего строительного бизнеса.

**Решение:** "Прораб-Финанс Мост" – это **SaaS-платформа**, состоящая из:
    *   **Лендинга и Личного Кабинета (React):** Лендинг для описания продукта. Личный Кабинет – основной интерфейс для **Владельца Организации**, где он управляет подпиской, настройками своей компании и создает учетные записи для **Администраторов** (сотрудников, которые будут работать в Веб-админке).
    *   **Веб-интерфейса (Админка) (React):** Для **Администраторов** (доступ которым предоставлен Владельцем через Личный Кабинет). Здесь происходит управление проектами, справочниками (материалы, работы, поставщики), создание и управление учетными записями **Прорабов** (пользователей мобильного приложения), а также просмотр и выгрузка отчетов на основе данных от прорабов.
    *   **Ультра-простого мобильного приложения (React Native)** для **Прорабов** для быстрой фиксации первичных данных прямо на объекте (приемка/списание материалов, учет выполненных работ).
    *   **Облачного бэкенда (Laravel 11)** для централизованного хранения, обработки данных и управления доступом.
    *   **API** для взаимодействия всех частей и для будущих прямых интеграций.
npx @redocly/cli build-docs docs/api/openapi.yaml --output docs/api/index.html

**Ценность:** Платформа устраняет двойной ввод, снижает ошибки, ускоряет обмен данными между "полем" и "офисом", повышает прозрачность и оперативность учета для малого и среднего строительного бизнеса, четко разделяя зоны ответственности Владельца, Администратора и Прораба.

## 2. Ключевые Функции (MVP - Minimum Viable Product)

### Мобильное приложение для Прораба (React Native)

*   **Авторизация:** Вход по логину/паролю (учетная запись создается Администратором в Веб-интерфейсе).
*   **Выбор Объекта:** Возможность переключаться между назначенными объектами.
*   **Приемка Материалов:**
    *   Выбор поставщика (из справочника).
    *   Выбор материала (из справочника).
    *   Ввод количества.
    *   Прикрепление фото накладной/материала.
    *   **Умная валидация вводимых данных** (проверка соответствия единицам измерения, выявление аномалий в количестве).
    *   **Ввод номера и даты накладной** для последующей сверки с документами в СБИС.
    *   *Запись лога о приемке.*
*   **Списание Материалов:**
    *   Выбор материала из "остатков на объекте" (принятых ранее).
    *   Ввод количества.
    *   Указание, на какой вид работ списано (выбор из справочника).
    *   **Привязка к статьям затрат** (для корректного отражения в бухгалтерском учете).
    *   *Запись лога о списании.*
*   **Фиксация Выполненных Работ:**
    *   Выбор вида работ (из справочника, привязанного к объекту/смете).
    *   Ввод выполненного объема (единицы измерения подтягиваются из справочника).
    *   Прикрепление фото выполненных работ (опционально, но рекомендуется).
    *   **Указание исполнителей работ** (для формирования нарядов и ведомостей).
    *   *Запись лога о выполнении.*
*   **Офлайн-режим:** Возможность вносить данные без интернета с последующей автоматической синхронизацией при появлении сети.
*   **Шаблоны типовых операций:** Сохранение часто используемых комбинаций для ускорения ввода.

### Веб-интерфейс для Администратора/Бухгалтера (React)

*   **Авторизация:** Вход по логину/паролю (учетная запись создается Владельцем Организации в Личном Кабинете).
*   **Управление Пользователями (Прорабами):** Добавление/редактирование/блокировка прорабов, назначение ролей (если предполагается несколько ролей для мобильного приложения).
*   **Управление Объектами:** Создание/редактирование объектов, назначение прорабов на объекты.
*   **Управление Справочниками:**
    *   Материалы (название, ед. изм.).
    *   Виды работ (название, ед. изм.).
    *   Поставщики.
    *   **Импорт справочников из СБИС/1С** (загрузка номенклатуры, контрагентов для синхронизации).
    *   **Синхронизация кодов и наименований** с учетными системами.
    *   (Важно: эти справочники используются в мобильном приложении для выбора).
*   **Просмотр Логов:** Просмотр всех записей, сделанных прорабами (приемки, списания, работы) с фильтрацией по объекту, дате, типу операции.
*   **Формирование Отчетов/Выгрузок:**
    *   **Ключевая функция MVP!** Генерация отчета (например, за период по объекту) в формате CSV или Excel, структура которого максимально удобна для импорта в СБИС/1С (например, отчет по движению материалов, отчет по выполненным работам).
    *   **Конструктор шаблонов выгрузок** под конкретные разделы СБИС (Товары, Склад, Производство, Строительство).
    *   **Предварительный просмотр данных** перед выгрузкой с возможностью корректировки.
    *   **Контроль качества данных** с подсветкой потенциальных проблем перед выгрузкой (дубли, нестыковки).
*   **Интеграция с ЭДО:**
    *   **Упрощенная проверка входящих документов** из СБИС (сверка с данными, введенными прорабами).
    *   **Полуавтоматическое сопоставление** накладных с приходами материалов.
*   **Дополнительный функционал учета:**
    *   **Формирование актов списания** по форматам, совместимым с СБИС.
    *   **Учет подотчетных средств** прорабов с привязкой к проектам (для упрощения отражения в бухучете).
    *   **Генерация наборов проводок** для быстрого импорта в бухгалтерские системы.

### Личный Кабинет Владельца Организации (React) - *Новый раздел для ясности*

*   **Авторизация:** Вход по логину/паролю (основной пользователь организации).
*   **Управление Организацией:** Редактирование данных компании.
*   **Управление Подпиской:** Выбор тарифа, оплата.
*   **Управление Пользователями (Администраторами):** Создание/редактирование/блокировка учетных записей для сотрудников, которые будут использовать Веб-интерфейс (Админку).
*   **(Возможно) Просмотр общей статистики/лимитов по тарифу.**
*   **(Возможно) Настройки интеграций (в будущем).**
*   **Техподдержка.**

### Бэкенд и API (Laravel 11)

*   **API:** RESTful API для взаимодействия с мобильным и веб-приложением.
*   **База данных:** Хранение пользователей, объектов, справочников, всех логов операций.
*   **Бизнес-логика:** Обработка данных, расчет остатков материалов на объекте (упрощенный), управление правами доступа.
*   **Фоновые задачи (Queues):** Для обработки синхронизации из офлайн-режима.

## 3. Технологический Стек

*   **Бэкенд:** PHP 8.3+, Laravel 11
*   **Мобильное приложение:** React Native (на базе React 18.3.1)
*   **Веб-приложение:** React 18.3.1, TypeScript 5.5, Vite 5.3.1 (или Webpack 5.92.1)
*   **База данных:** PostgreSQL 16.3 (или MySQL 8.4.0)
*   **Веб-сервер:** Nginx 1.26.1
*   **Кеширование/Очереди:** Redis 7.2.5
*   **Хостинг:** Облачная платформа (AWS, DigitalOcean, Yandex Cloud, etc.)
*   **Версионирование:** Git 2.45.2 (GitLab, GitHub, Bitbucket)

## 4. Монетизация

**Основная Модель: SaaS-подписка (Recurring Revenue)**

Платформа будет монетизироваться преимущественно через ежемесячную или годовую подписку. Будут предложены несколько тарифных планов, ориентированных на разные размеры и потребности строительных компаний.

**Тарифные Планы (Tiered Pricing):**

1.  **"Старт"**
    *   **Целевая аудитория:** Небольшие компании, ИП, начинающие подрядчики.
    *   **Ключевые ограничения:**
        *   До 2-х пользователей-прорабов.
        *   До 3-х активных объектов одновременно.
        *   До 500 МБ хранилища для фото/документов.
    *   **Функционал:**
        *   Основные функции мобильного приложения (приемка, списание, работы).
        *   Базовый просмотр логов в веб-админке.
        *   Генерация стандартных отчетов (CSV/Excel).
        *   Управление пользователями-прорабами (до 2-х).
        *   Управление объектами (до 3-х).
        *   Базовые справочники (материалы, работы, поставщики) без импорта.
    *   **Ориентировочная цена:** 1 990 руб./месяц (при годовой оплате скидка 10-15%).

2.  **"Бизнес" (Наиболее популярный)**
    *   **Целевая аудитория:** Малые и средние строительные компании.
    *   **Ключевые ограничения/возможности:**
        *   До 10 пользователей-прорабов.
        *   До 15 активных объектов одновременно.
        *   До 5 ГБ хранилища для фото/документов.
        *   До 2-х пользователей-администраторов в веб-интерфейсе.
    *   **Функционал:**
        *   Все функции тарифа "Старт".
        *   Импорт справочников из CSV/Excel (для СБИС/1С).
        *   Конструктор шаблонов выгрузок.
        *   Расширенная фильтрация и поиск по логам.
        *   Базовая интеграция с ЭДО (сверка).
        *   Уведомления (базовые).
        *   Техническая поддержка по email/чату.
    *   **Ориентировочная цена:** 6 990 руб./месяц (при годовой оплате скидка 10-15%).

3.  **"Профи"**
    *   **Целевая аудитория:** Средние и более крупные строительные компании с несколькими командами.
    *   **Ключевые ограничения/возможности:**
        *   До 30 пользователей-прорабов.
        *   До 50 активных объектов одновременно.
        *   До 20 ГБ хранилища для фото/документов.
        *   До 5 пользователей-администраторов.
    *   **Функционал:**
        *   Все функции тарифа "Бизнес".
        *   API-доступ для интеграций (с лимитами).
        *   Расширенные права доступа и роли для пользователей.
        *   Приоритетная техническая поддержка.
        *   Возможность подключения модуля "Продвинутая Аналитика" (за доп. плату).
    *   **Ориентировочная цена:** 14 990 руб./месяц (при годовой оплате скидка 10-15%).

4.  **"Энтерпрайз"**
    *   **Целевая аудитория:** Крупные строительные организации, холдинги.
    *   **Условия:** Индивидуальные, по запросу.
    *   **Возможности:**
        *   Кастомное количество пользователей-прорабов и администраторов.
        *   Неограниченное (или значительно увеличенное) количество объектов.
        *   Выделенное хранилище данных.
        *   Полный API-доступ.
        *   Возможность White Label (брендирование под клиента).
        *   Персональный менеджер и SLA.
        *   Помощь во внедрении и кастомные доработки (могут оплачиваться отдельно).
    *   **Ориентировочная цена:** От 49 900 руб./месяц.

**Пробный Период / Free Tier:**

*   **Бесплатный пробный период:** 14 дней на тарифе "Бизнес" для всех новых регистраций.
*   **Возможен Free Tier (ограниченный):** 1 прораб, 1 объект, до 10 операций в месяц. Цель - ознакомление с базовыми функциями для очень маленьких команд.

**Дополнительные Источники Дохода:**

1.  **Платные Модули (Add-ons):**
    *   **"Продвинутая Аналитика и BI":** Детальные дашборды, кастомные отчеты, сравнение план/факт (если не входит в основной тариф). *Ориентировочно: +20-30% к стоимости тарифа "Профи" или "Бизнес".*
    *   **"Модуль Управления Заявками и Согласованиями":** Для более сложных процессов. *Ориентировочно: +15-25% к стоимости тарифа.*
2.  **Услуги по Внедрению и Кастомизации (One-time fees):**
    *   **"Стартовый Пакет Внедрения":** Помощь с импортом больших объемов данных, настройка сложных справочников, обучение команды. *Ориентировочно: 15 000 - 50 000 руб. разово.*
    *   **Разработка Кастомных Интеграций/Отчетов:** Если требуется уникальная интеграция или очень специфический отчет. *Ориентировочно: Почасовая ставка или фиксированная цена за проект.*
3.  **Премиум-Поддержка (Recurring fee):**
    *   Для тарифов "Старт" и "Бизнес" может быть предложен пакет расширенной поддержки с более быстрым временем ответа. *Ориентировочно: +1000-2000 руб./месяц.*
4.  **Оплата за Превышение Лимитов (Pay-per-use):**
    *   **Дополнительное хранилище:** Например, 500 руб. за каждые дополнительные 5 ГБ/месяц.
    *   **Дополнительные пользователи-прорабы (сверх пакета на младших тарифах):** Например, 500-700 руб./месяц за каждого дополнительного прораба.

**Примерный Расчет Потенциальной Прибыли (Иллюстративный)**

*Этот расчет является крайне упрощенным и служит для демонстрации потенциала. Реальные цифры будут зависеть от множества факторов, включая эффективность маркетинга, стоимость привлечения клиента (CAC), средний доход с клиента (ARPU), операционные расходы и т.д.*

**Предположения (Гипотетические):**

*   **Средний ARPU (Average Revenue Per User/Account):**
    *   Консервативно: 3 000 руб./месяц (много клиентов на "Старте").
    *   Реалистично: 7 000 руб./месяц (хорошее распределение, большинство на "Бизнесе").
    *   Оптимистично: 12 000 руб./месяц (много "Профи" и доп. услуг).
*   **Стоимость привлечения клиента (CAC):**
    *   На начальном этапе: 5 000 - 10 000 руб.
    *   При масштабировании: 3 000 - 7 000 руб.
*   **Ежемесячные Операционные Расходы (OPEX):** (хостинг, зарплаты команды поддержки/разработки (минимальные на старте), маркетинг, налоги)
    *   Год 1 (MVP, малая команда): 150 000 - 300 000 руб./месяц.
    *   Год 2 (рост команды, маркетинг): 300 000 - 700 000 руб./месяц.

**Сценарии Роста Клиентской Базы (на конец года):**

*   **Сценарий 1: Консервативный**
    *   Год 1: 50 клиентов
    *   Год 2: 150 клиентов
*   **Сценарий 2: Реалистичный**
    *   Год 1: 100 клиентов
    *   Год 2: 300 клиентов
*   **Сценарий 3: Оптимистичный**
    *   Год 1: 200 клиентов
    *   Год 2: 600 клиентов

**Пример Расчета для Реалистичного Сценария (Конец Года 1):**

*   Клиенты: 100
*   ARPU (реалистичный): 7 000 руб.
*   Доход в месяц: 100 * 7 000 = 700 000 руб.
*   Предположим, CAC = 5 000 руб. Расходы на привлечение 100 клиентов = 500 000 руб. (эти расходы распределены по году).
*   OPEX (средний за год 1): 225 000 руб./месяц.

*   **Месячная Прибыль (к концу года 1, без учета разовых CAC на всех клиентов):**
    `Доход - OPEX = 700 000 - 225 000 = 475 000 руб.`
*   **Годовой доход (упрощенно, если все 100 клиентов были с начала года):** `700 000 * 12 = 8 400 000 руб.`
*   **Годовой OPEX:** `225 000 * 12 = 2 700 000 руб.`
*   **Годовые расходы на привлечение (CAC):** `100 * 5000 = 500 000 руб.`
*   **Примерная годовая прибыль до налогов (очень грубо):** `8 400 000 - 2 700 000 - 500 000 = 5 200 000 руб.`

**Ключевые Факторы Успеха Монетизации:**

*   **Ценность Продукта:** Насколько хорошо продукт решает проблемы клиентов.
*   **Удержание Клиентов (Retention):** Низкий отток клиентов критически важен для SaaS.
*   **Эффективность Маркетинга и Продаж:** Способность привлекать клиентов по разумной цене.
*   **Масштабируемость:** Способность обслуживать растущее число клиентов без пропорционального роста затрат.
*   **Конверсия из пробной версии в платную.**

**Дисклеймер:** *Данный раздел монетизации и расчеты являются предварительными, основаны на гипотезах и требуют детального маркетингового исследования, конкурентного анализа и финансового планирования. Цены и условия могут быть скорректированы на основе обратной связи от рынка и первых пользователей.*

## 5. Пошаговый План Реализации MVP (Примерный)

**(Общая оценка: ~4-6 месяцев для команды из 2 человек, один фулстек/бэкенд, один фронтенд/мобильный)**

**Этап 1: Подготовка и Проектирование (2-3 недели)**

1.  **Детализация требований:** Окончательно определить *минимальный* набор функций для MVP.
2.  **Проектирование UI/UX:** Создать простые, интуитивно понятные макеты (wireframes, mockups) для мобильного и веб-интерфейса. **Ключ - простота для прораба!**
3.  **Проектирование БД:** Разработать структуру базы данных.
4.  **Проектирование API:** Определить основные эндпоинты и форматы данных.
5.  **Выбор и настройка инструментов:** Репозиторий Git, таск-трекер, CI/CD (базовый).

**Этап 2: Разработка Бэкенда (4-6 недель)**

1.  **Настройка проекта Laravel:** Установка, базовая конфигурация.
2.  **Реализация Аутентификации:** Регистрация (для админа), логин (для всех).
3.  **Создание Моделей и Миграций:** Users, Projects, Materials, WorkTypes, Suppliers, Logs (Receipts, WriteOffs, WorkDone).
4.  **Реализация API эндпоинтов:** CRUD для пользователей, объектов, справочников; эндпоинты для записи логов из мобильного приложения.
5.  **Реализация прав доступа:** Разграничение возможностей для прораба и администратора.
6.  **Написание базовых тестов (Unit, Feature).**

**Этап 3: Разработка Мобильного Приложения (6-8 недель)**

1.  **Настройка проекта React Native:** Установка, базовая навигация (React Navigation).
2.  **Экраны Аутентификации:** Логин.
3.  **Экран выбора объекта.**
4.  **Реализация основных экранов:** Приемка, Списание, Выполненные работы (формы ввода, выбор из справочников, загрузка фото).
5.  **Интеграция с API:** Получение справочников, отправка логов.
6.  **Реализация Офлайн-хранилища:** Использование AsyncStorage или Realm/WatermelonDB для хранения данных при отсутствии сети.
7.  **Реализация логики Синхронизации:** Отправка накопленных данных на бэкенд при появлении сети.
8.  **Базовое тестирование на эмуляторах/устройствах.**

**Этап 4: Разработка Веб-Интерфейса (5-7 недель)**

1.  **Настройка проекта React:** Установка, роутинг.
2.  **Экраны Аутентификации:** Логин.
3.  **Реализация CRUD интерфейсов:** Управление пользователями, объектами, справочниками.
4.  **Просмотр Логов:** Табличное представление данных с фильтрацией.
5.  **Реализация Выгрузки Отчетов:** Генерация CSV/Excel файлов по запросу пользователя.
6.  **Интеграция с API.**
7.  **Адаптивная верстка (для десктопа).**

**Этап 5: Тестирование, Развертывание и Запуск (3-4 недели)**

1.  **Интеграционное тестирование:** Проверка взаимодействия всех частей системы.
2.  **Нагрузочное тестирование (базовое):** Проверка производительности API.
3.  **Подготовка инфраструктуры:** Настройка сервера, базы данных, веб-сервера на хостинге.
4.  **Развертывание (Deploy):** Бэкенда и веб-приложения.
5.  **Сборка и публикация мобильного приложения:** Внутреннее тестирование (TestFlight, Google Play Internal Testing).
6.  **Beta-тестирование:** Привлечение реальных прорабов и бухгалтеров для получения обратной связи.
7.  **Исправление багов по результатам бета-теста.**
8.  **Публичный запуск MVP.**

**Этап 6: Поддержка и Развитие (Постоянно)**

1.  **Сбор обратной связи:** Анализ использования, общение с пользователями.
2.  **Исправление багов.**
3.  **Планирование и разработка следующих версий:** Добавление новых функций (см. ниже).

## 6. Будущие Улучшения (Post-MVP)

*   **Прямые интеграции с учетными системами:** API-интеграция со СБИС, 1С (самое важное).
*   **Более детальный учет рабочего времени:** Табели, отчеты по часам.
*   **Управление задачами:** Постановка и контроль выполнения задач для прорабов.
*   **Фото-отчеты:** Возможность аннотирования фото, генерация структурированных фото-отчетов.
*   **GPS-трекинг:** Фиксация местоположения при выполнении операций (опционально).
*   **Уведомления (Push & Email):** О новых задачах, о приемке материалов и т.д.
*   **Аналитика и Дашборды:** Визуализация данных по расходу материалов, выполнению работ, срокам.
*   **Интеграция с бюджетированием/сметами:** Сравнение факта с планом.
*   **Управление Заявками:** Более сложная система заявок на материалы/технику с согласованиями.

---

## 7. Рекомендуемые инструменты разработки

### Пакеты для бэкенда

#### Аутентификация и авторизация
- **tymon/jwt-auth** - реализация JWT аутентификации для Laravel *(будет установлен)*
- **spatie/laravel-permission** - управление ролями и разрешениями *(под вопросом, возможно реализация своей системы)*

#### Обработка API
- **league/fractal** или **spatie/laravel-data** - трансформация данных для API ответов
- **darkaonline/l5-swagger** - документация API через Swagger/OpenAPI

#### Работа с файлами
- **intervention/image** - обработка изображений
- **league/flysystem-aws-s3-v3** - интеграция с S3-совместимыми хранилищами

#### Обработка данных и отчеты
- **maatwebsite/excel** - работа с Excel-файлами для экспорта отчетов
- **barryvdh/laravel-dompdf** - генерация PDF-документов

#### Интеграция с платежными системами
- **laravel/cashier** - для Stripe или аналоги для других платежных систем

#### Очереди и задачи
- **predis/predis** - клиент Redis для очередей и кэширования

#### Инструменты разработки
- **barryvdh/laravel-debugbar** - отладочная панель
- **barryvdh/laravel-ide-helper** - генерация подсказок для IDE
- **nunomaduro/larastan** - статический анализатор кода

#### Тестирование
- **pestphp/pest** - современный фреймворк для тестирования
